<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Spring Boot Actuator Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 p-6">
<h1 class="text-3xl font-bold mb-6">Spring Boot Actuator Dashboard</h1>

<!-- CPU & Memory Row -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
  <div class="bg-white shadow-md rounded-lg p-4">
    <h2 class="text-lg font-semibold mb-2">CPU Usage (%)</h2>
    <canvas id="cpuChart"></canvas>
  </div>
  <div class="bg-white shadow-md rounded-lg p-4">
    <h2 class="text-lg font-semibold mb-2">Heap vs Non-Heap Memory (MB)</h2>
    <canvas id="memoryChart"></canvas>
  </div>
  <div class="bg-white shadow-md rounded-lg p-4">
    <h2 class="text-lg font-semibold mb-2">Requests/sec</h2>
    <canvas id="rpsChart"></canvas>
  </div>
  <div class="bg-white shadow-md rounded-lg p-4">
    <h2 class="text-lg font-semibold mb-2">Request Latency (ms)</h2>
    <canvas id="latencyChart"></canvas>
  </div>
</div>

<!-- HTTP Metrics -->
<div id="http-metrics" class="bg-white shadow-md rounded-lg p-4 mb-6">
  <h2 class="text-xl font-semibold mb-2">HTTP Metrics</h2>
  <canvas id="httpStatusChart"></canvas>
  <canvas id="topEndpointsChart" class="mt-4"></canvas>
  <canvas id="errorRateChart" class="mt-4"></canvas>
</div>

<div class="bg-white shadow-md rounded-lg p-4">
  <h2 class="text-lg font-semibold mb-2">Per-Endpoint Latency Chart</h2>
  <canvas id="endpointLatencyChart"></canvas>
</div>


<!-- Endpoint Latency Table -->
<div id="endpoint-latency" class="bg-white shadow-md rounded-lg p-4 mb-6">
  <h2 class="text-xl font-semibold mb-2">Per-Endpoint Latency</h2>
  <table class="w-full border-collapse border border-gray-300 text-sm">
    <thead>
      <tr class="bg-gray-200">
        <th class="border border-gray-300 px-2 py-1">Endpoint</th>
        <th class="border border-gray-300 px-2 py-1">Method</th>
        <th class="border border-gray-300 px-2 py-1">Count</th>
        <th class="border border-gray-300 px-2 py-1">Avg Latency (ms)</th>
        <th class="border border-gray-300 px-2 py-1">Max Latency (ms)</th>
        <th class="border border-gray-300 px-2 py-1">Trend</th>
      </tr>
    </thead>
    <tbody id="endpoint-latency-table"></tbody>
  </table>
</div>

<!-- Health Card -->
<div id="health" class="bg-white shadow-md rounded-lg p-4 mb-4">
  <h2 class="text-xl font-semibold mb-2">Health</h2>
  <p id="health-status" class="text-lg font-bold"></p>
</div>

<!-- Metrics Table -->
<div id="metrics" class="bg-white shadow-md rounded-lg p-4 mb-4">
  <h2 class="text-xl font-semibold mb-2">Metrics</h2>
  <input
    type="text"
    id="metrics-search"
    placeholder="Search metrics..."
    class="mb-3 p-2 border border-gray-300 rounded w-full"
  />
  <table class="w-full border-collapse border border-gray-300 text-sm">
    <thead>
      <tr class="bg-gray-200">
        <th class="border border-gray-300 px-2 py-1">Metric</th>
        <th class="border border-gray-300 px-2 py-1">Value</th>
        <th class="border border-gray-300 px-2 py-1">Description (Unit)</th>
        <th class="border border-gray-300 px-2 py-1">Status</th>
      </tr>
    </thead>
    <tbody id="metrics-table"></tbody>
  </table>
</div>

<!-- Load external JS -->
<script src="/api/dashboard.js"></script>
</body>
</html>
